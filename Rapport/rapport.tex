%% LyX 2.1.4 created this file.  For more info, see http://www.lyx.org/.
%% Do not edit unless you really know what you are doing.
\documentclass[english]{article}
\usepackage[T1]{fontenc}
\usepackage[latin9]{inputenc}
\usepackage{float}
\usepackage{graphicx}

\makeatletter
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% User specified LaTeX commands.
\usepackage{hyperref}   % pour les liens cliquables de la table des matières
 
\makeatletter
\@addtoreset{section}{part}   % reprendre à partir de 1 les sections des parties suivantes.
\makeatother
 

\makeatother

\usepackage{babel}
\begin{document}

\title{Technologie Web 2}


\author{Rapport de Projet}

\maketitle
\tableofcontents{}

\listoffigures



\part{Introduction}

L\textquoteright objectif de ce projet est de réaliser un site de
vente en ligne, sur le même modèle principe que des sites comme www.amazon.com
ou leboncoin.fr. 


\section{Fonctionnalités principales}

On retrouvera sur le site les fonctionnalités présentés ci-après : 


\subsection{La création et la gestion de comptes}

Elle permettra la création/édition d'un compte via les informations
données par l'utilisateur (identité, email, pseudo et mot de passe).
Il existera aussi un compte administrateur qui pourra modifier le
contenu du site en ligne.


\subsection{Recherche d'un produit}

La recherche d'un produit peut se faire de deux manières :
\begin{enumerate}
\item via la barre de recherche
\item via la recherche avancée, qui sera multi-critères (nom/ type d'objet
/ prix / note de l\textquoteright objet / nombre de ventes réalisées
/ réputation du vendeur)
\end{enumerate}

\subsection{Actions disponibles sur le site}

Les autres fonctions du site sont listés ci-après :
\begin{itemize}
\item deux types de connexions : utilisateur simple (acheteur ou vendeur)
ou administrateur,
\item consulter un produit,
\item acheter un produit,
\item vendre un produit,
\item système de paiement,
\item commenter et noter un produit,
\item accéder au support client
\end{itemize}

\subsection{Valorisation de comptes}

Le systèle de valorisation de comptes qui sera utilisée sera le suivant
:
\begin{itemize}
\item un compte Premium ayant des avantages supplémentaires lors de l'achat
de produits par rapport à l'utilisateur simple.
\item un compte Super Premium ayant encore plus d'avantages.
\end{itemize}

\section{Liste des acteurs }

Cette liste reprend et résume les éléments concernant les types d'utilisateur
énoncés dans la partie 1 Fonctionnalités principales
\begin{enumerate}
\item Utilisateur simple : cet utilisateur peut être soit acheteur ou vendeur
sur le site; il n'a aucun droit de modification sur le site.
\item Administrateur : cet utilisateur a tous les droits sur le site, il
peut en modifier le contenu à volonté. 
\end{enumerate}

\section{Contraintes matérielles et logicielles }
\begin{enumerate}
\item Le site doit être accessible depuis les navigateurs suivants : Google
Chrome, Mozilla Firefox.
\item Résolutions d'écran supportées : le site web doit pouvoir s'adapter
à tous types d'afficheurs.
\end{enumerate}

\part{Spécifications}

Dans cette partie, nous présenterons les différents diagrammes qui
découlent de l'analyse fonctionelle du problème.


\section{Diagrammes de cas d'utilisation}

Nous présentons ici une liste non-exhaustive des diagrammes d'utilisation
issue de la compréhension du besoin métier.

\begin{figure}[H]
\includegraphics[scale=0.4]{/home/rasendrasoa/OpenWallet/Conception/use_case_create_account}

\caption{cas d'utilisation : création/gestion de compte}
\end{figure}
\begin{figure}[H]
\includegraphics[scale=0.3]{/home/rasendrasoa/OpenWallet/Conception/use_case_search_products}

\caption{cas d'utilisation : rechercher un produit}
\end{figure}
\begin{figure}[H]
\includegraphics[scale=0.5]{/home/rasendrasoa/OpenWallet/Conception/use_case_identification}

\caption{cas d'utilisation : connexion}


\end{figure}
\begin{figure}[H]
\includegraphics[scale=0.5]{/home/rasendrasoa/OpenWallet/Conception/use_case_consult_a_product.jpeg}

\caption{cas d'utilisation : consulter un produit}


\end{figure}
\begin{figure}[H]
\includegraphics[scale=0.5]{/home/rasendrasoa/OpenWallet/Conception/use_case_add_delete_product.jpeg}

\caption{cas d'utilisation : ajouter/supprimer un produit}


\end{figure}
\begin{figure}[H]
\includegraphics[scale=0.5]{/home/rasendrasoa/OpenWallet/Conception/use_case_diagram_comment.jpeg}

\caption{cas d'utilisation : commenter un produit}


\end{figure}
\begin{figure}[H]
\includegraphics[scale=0.5]{/home/rasendrasoa/OpenWallet/Conception/use_case_diagram_management_cart}

\caption{cas d'utilisation : gestion du panier d'achat}


\end{figure}
\begin{figure}[H]
\includegraphics[scale=0.5]{/home/rasendrasoa/OpenWallet/Conception/use_case_diagram_payment.jpeg}

\caption{cas d'utilisation : paiement}


\end{figure}
\begin{figure}[H]
\includegraphics[scale=0.4]{/home/rasendrasoa/OpenWallet/Conception/use_case_Grade}

\caption{cas d'utilisation : noter un produit}


\end{figure}



\section{Diagramme de navigation}

Le diagramme de navigation nous permettra de modéliser le parcours
d'un utilisateur sur le site.

\begin{figure}[H]
\includegraphics[scale=0.2]{/home/rasendrasoa/OpenWallet/Conception/diagramme_nav}

\caption{Diagramme de navigation}


\end{figure}



\part{Conception préliminaire}


\section{Diagrammes de sequence système}

\begin{figure}[H]
\includegraphics[scale=0.3]{/home/rasendrasoa/OpenWallet/Conception/sequence_diagram_system_account}

\caption{DSS - gestion de compte}


\end{figure}
\begin{figure}[H]
\includegraphics[scale=0.3]{/home/rasendrasoa/OpenWallet/Conception/sequence_diagram_system_account_creation}

\caption{DSS - création de compte}


\end{figure}
\begin{figure}[H]
\includegraphics[scale=0.3]{/home/rasendrasoa/OpenWallet/Conception/sequence_diagram_system_consult_a_product.jpeg}

\caption{DSS - consultation d'un produit}
\end{figure}
\begin{figure}[H]
\includegraphics[scale=0.3]{/home/rasendrasoa/OpenWallet/Conception/sequence_diagram_system_delete_a_product.jpeg}

\caption{DSS - Suppression d'un produit}


\end{figure}





\section{Diagramme de séquence}

\begin{figure}[H]
\includegraphics[scale=0.75]{/home/rasendrasoa/OpenWallet/Conception/diagram_sequence_cart_management}

\caption{Diagramme de séquence - gestion du panier}


\end{figure}



\section{Diagramme de classe}

\begin{figure}[H]
\includegraphics[scale=0.5]{/home/rasendrasoa/OpenWallet/Conception/diagramme_classe}

\caption{Diagramme de classe}


\end{figure}



\part{Conception détaillée}

\begin{figure}
\includegraphics[scale=0.3]{/home/rasendrasoa/OpenWallet/Conception/diagramme_classe}

\caption{Digramme de classes participantes}


\end{figure}



\part{Implémentation et tests}

Dans cette partie, nous allons dans un premier temps détailler les
étapes de la programmation ainsi que les choix techniques, puis les
tests effectués, un aperçu du résultat obtenu et enfin les principales
difficultés rencontrées.


\section{Les différentes étapes du développement}


\subsection{Construction des pages avant-plan (front-end)}

Nous avons dans un premier dans mis en place la structure principale
du site avec les diagrammes de conception. Pour réaliser les fonctionnalités
dans notre diagramme de navigation, on avons déterminé qu\textquoteright il
y a au total 13 pages type à réaliser: 
\begin{itemize}
\item La page pour gérer le compte utilisateur
\item La page pour ajouter en spécifier un produit à vendre
\item La page pour faire une recherche avancée dans notre liste des produits
\item La page pour gérer le panier et passer au paiement
\item La Homepage
\item La page pour inscription
\item La page pour s\textquoteright indentifier
\item La page pour accéder au information détaillé du commande
\item La page du produit à vendre
\item La page pour afficher les résultats de recherche
\item La page pour devenir compte premium
\item La page pour ajouter une adresse de livraison
\item La page pour service clientèle
\end{itemize}
Cette première partie est principalement axée sur le côté HTML/CSS
quasiment sans aucun développement back-end. Nous avons développé
ces pages pour un style de design unifié et pour vérifier notre conception.


\subsubsection{Choix techniques et bibliothèques}
\begin{itemize}
\item \textbf{HTML/CSS}: Le HTML (« HyperText Mark-Up Language ») est un
langage dit de « balisage » ou de « structuration » permettant la
conception de pages web avec des balises de formatage. Les balises
permettent d'indiquer la façon dont doivent être présentés le document
et les liens qu'il établit avec d'autres documents. Le CSS (« Cascading
Style Sheets » : feuilles de style en cascade) est un langage informatique
complétant le HTML. Alors que le HTML structure la page Web, le CSS
va la mettre en forme en y apportant du style. 
\item \textbf{Modèle de design Mem{[}é{]}nto by Your Inspiration Themes}:
On a utilisé un modèle de design web Memento. Memento est un thème
brandable et créatif avec une mise en page propre, entreprise et réactive.,
Il permet de définir n'importe quelle couleur à des éléments tels
que des arrière-plans, des liens, du texte, des liens de menu, etc.
et changer complètement l'apparence de site en quelques secondes. 
\end{itemize}

\subsection{Conception de base de données}

La réalisation de notre site web a requis la création d\textquoteright une
base de données. 

\begin{figure}[H]
\includegraphics{collé1}

\caption{Base de données MySQL}
\end{figure}
Dans notre cas, il nous a tout d\textquoteright abord fallu créer
ces 8 tables pour la gestion de site web. La table user est destinér
à gérer toutes les information utilisateur autre que le pseudonyme
et le mot de passe. Ensuite on construit les autres 3 tables de base:
orders, category et address. Puis, lorsque nous avons commencé category
et user, ça nous permet d\textquoteright initialiser le table produit
avec 2 clés étranger id\_user et id\_category. Après on construit
la table orders pour rajouter la possibilité d\textquoteright insérer
plusieurs produits. La table comment est reliée au orders et user.
Enfin, pour obtenir un état intermédiaire entre produit, user et orders,
il nous a donc fallu rajouter deux tables: item\_cart et item\_order
concernant les tableaux récapitulatif des items perçus par l\textquoteright association
avec les paniers et les commandes. 


\subsubsection{Choix techniques et bibliothèques}
\begin{itemize}
\item SQL: est un langage informatique normalisé servant à exploiter des
bases de données relationnelles. La partie langage de manipulation
des données de SQL permet de rechercher, d'ajouter, de modifier ou
de supprimer des données dans les bases de données relationnelles. 
\end{itemize}

\subsection{Développement Arrière-plan(DAO)}

Après avoir implémenté les classes Javabeans avec ses propres méthodes
et fini le script SQL pour la construction BD, Il a fallu trouver
une solution pour la communication. Si on emploie que les méthodes
JDBC, on a actuellement une représentation globale comme suit :

\begin{figure}[H]
\includegraphics[scale=0.7]{collé2}

\caption{Communication uniquement avec JDBC}
\end{figure}


En théorie, MVC est ainsi bien respecté. Mais avec ce modèle on risque
de mélanger le code responsable des traitements métier au code responsable
du stockage des données en pratique. Il rend aussi les tests difficile
à réaliser (il est impossible de changer de mode de stockage. Que
ce soit vers un autre SGBD, voir vers un système complètement différent
d'une base de données, cela impliquerait une réécriture complète de
tout le modèle, car le code métier est mêlé avec et dépendant du code
assurant le stockage). Au lieu de faire communiquer directement nos
objets métier avec la base de données, on utilise une autre solution
pour améliorer la performance et la robustesse de notre système. C'est
le couche DAO qui va ensuite de son côté communiquer avec le système
de stockage. On obitent une nouvelle représentation globale comme
suit:

\begin{figure}
\includegraphics[scale=0.7]{collé3}

\caption{Communication avec DAO}


\end{figure}


Pour l'implémentation du modèle(MVC), nous avonc procédé en deux étapes
:
\begin{enumerate}
\item \textbf{Création des classes métier (javabeans)} : En correspondance
à notre conception et construction BD, on crée 8 classes java: Address,
Category, Comment, ItemCart, ItemOrder, Orders, Product et User. Chaque
classe métiers contient des attribut du classe correspond à celui
de BD. Il nous a donc fallu rajouter une classe qui contenait seulement
les chemins des images que nous avons identifiés par l\textquoteright identifiant
de produit et celui de l\textquoteright image. Les classes métiers
possèdent que les méthodes pour get et set les attributs correspondant
mais ne touche pas la BD.
\item \textbf{Création des classes DAO} : 
\begin{figure}[H]
\includegraphics[scale=0.4]{collé4}

\caption{précisions sur le DAO}


\end{figure}

\end{enumerate}
La couche modèle est constituée de la couche métier (en rouge) et
de la couche données (en vert). La couche métier n'a connaissance
que des interfaces décrivant les objets de la couche données. Ainsi,
peu importe le système de stockage final utilisé, du point de vue
du code métier les méthodes à appeler ne changent pas, elles seront
toujours celles décrites dans l'interface. C'est uniquement l'implémentation
qui sera spécifique au mode de stockage.

Dans notre cas, on construire en premier temps la classe DBUtil pour
établir le connection entre la base de données et les classes DAO.
Dans chaque classe DAO spécifiée on génère les commandes SQL par retirer
les propres attributs depuis notre objets Java Bean et les insérer
dans les commandes SQL prédéfinie. 

Par exemple:

\begin{figure}[H]
\includegraphics[scale=0.5]{collé5}

\caption{exemple 1 méthode DAO }


\end{figure}


Quand nous avons une nouvelle instance de Product Bean et nous voulons
de l\textquoteright enregistre dans notre base de données, Nous utiliserons
la méthode add dans Product DAO. Cette méthode prépare une ligne de
commande SQL \textquotedbl{}insert into Product values(null,?,?,?,?,?,?,?,
?, ?, ?, ?, ?)\textquotedbl{} et on le remplit avec les attribut de
notre objet Product. 

\begin{figure}[H]
\includegraphics[scale=0.5]{collé6}

\caption{exemple 2 méthode DAO}


\end{figure}


Dans le cas où l'information sur un produit spécifique avec son id\_product
vient à manquer, on peut quand même générer une commande select et
retirer toutes les information nécessaire. Et puis on instancier un
nouvel objet de Product, introduit ses attributs et le retour comme
résultat.


\subsubsection{Choix techniques}
\begin{itemize}
\item \textbf{DAO} :Un objet d'accès aux données (en anglais data access
object ou DAO) est un patron de conception (c'est-à-dire un modèle
pour concevoir une solution) utilisé dans les architectures logicielles
objet.
\end{itemize}

\subsection{Développement Arrière-plan(servlets et filtrages)}

Après nous avons eu les parties JavaBeans/BD fonctionnelles, Il faut
des méthode pour traiter les requêtes du client et pour la génération
de pages jsp dynamiques en utilisant le protocole http et donc un
serveur web. Pour notre projet, on a choisi les servlets et les filtrages
pour réaliser les liaisons avant-plan et arrière-plan.

Les filtres sont des objets qui peuvent transformer une requête ou
modifier une réponse. Ce sont des préprocesseur de la requête avant
qu\textquoteright elle atteigne une servlet. Dans notre projet nous
avons développé trois filtres pour traiter les requêtes clientèles.
L\textquoteright idée générale pour filtrage est d'extraire l\textquoteright uri
dans ServletRequest et trouver les noms de méthode dans l\textquoteright uri.
Par exemple, dans ForeAuthFilter on a :

\begin{figure}[H]
\includegraphics[scale=0.5]{collé7}

\caption{Filtre ForeAuthFilter}


\end{figure}


La fonctionnalité de cette filtre contient deux parties: 
\begin{enumerate}
\item Il extrait l\textquoteright uri dans ServletRequest, supprime le contextpath
dans l\textquoteright uri et enregistre le nom de méthode dans un
String. 
\item 2)Il vérifie si le nom de méthode est dans la liste des méthode (no
need for authentification) , si oui on le laisser passage au filtre
suivant. Sinon on vérifier l\textquoteright information d\textquoteright utilisateur
dans la ServletRequest et déterminer si on rédiger la requête vers
page d\textquoteright authentification directement. 
\end{enumerate}
Le chaînage des filtres est dans l\textquoteright ordre suivant: FiltrageBack
-FiltrageAuthentification-FiltrageFront Après le filtrage, chaque
méthode dans la requête est transformé comme une chaîne de caractère
qui redirige vers une servlet nommé \textquotedblleft xxxServlet\textquotedblright{}
ou une page jsp. 

Pour les servlets on a définit deux classes abstraites: BaseBackServlet
et BaseForeServlet qui vont définir les méthodes de base (ajouter,modifier,supprimer,
etc)pour les classes de notre modèle Javabeans. Chaque classe bean
hérite une classe BackServlet pour traiter les requêtes. Par exemple:

\begin{figure}[H]
\includegraphics[scale=0.5]{collé8}

\caption{méthode update pour ProductServlet }


\end{figure}


La figure 24 est la méthode \textquotedblleft mettre à jour\textquotedblright{}
pour ProductServlet. Une fois que la servlet reçoit la requête de
mise à jour, on extrait les nouveaux paramètres dans la requête, appele
le constructeur de ProductBean et ensuite le met à jour dans BD via
productDAO. Après le traitement, la méthode reirige vers la liste
de produits pour afficher les résultats.

Choix technique: Servlet : Une servlet est une classe Java qui permet
de créer dynamiquement des données au sein d'un serveur HTTP. Ces
données sont le plus généralement présentées au format HTML, mais
elles peuvent également l'être au format XML ou tout autre format
destiné aux navigateurs web. 


\section{Guide utilisateur}

Dans la partie \textquoteleft Guide d\textquoteright utilisateurs\textquoteright ,
nous vous présentons comment utiliser notre site web de vente comme
l\textquoteright administrateur.


\subsection{Déploiement de l'application web}

Il est nécessaire de lancer le script \textasciitilde{}/OpenWallet/Code/web/compile\_linux.sh
afin de compiler l'ensemble du code source.


\subsection{Guide Admin}

Etant l\textquoteright admin du site, il est responsable de mettre
à jour des produits et faire la gestion des commandes. En haut de
toutes les pages d\textquoteright administration, nous avons mis un
navigateur pour entrer la page d\textquoteright administration de
catégorie, utilisateurs et commandes.

http://127.0.0.1:8080/Openwallet/admin

C\textquoteright est le lien pour entrer la page d\textquoteright administration.
Nous allons être redirigés directement à la page d\textquoteright administration
de catégories. Pour ajouter les nouveaux produits, il faut d\textquoteright abord
ajouter sa catégorie. En bas de cette page, vous pouvez ajouter des
nouvelles catégories. Il y a aussi le button pour éditer les catégories
existantes.

Si quelqu\textquoteright un veut ajouter des produit sous certain
catégorie, donc il faut cliquer sur le bouton dans la colonne \textquotedblleft Category
Management\textquotedblright . Avec ce bouton, nous pouvons entrer
la page d\textquoteright administration de produits sous une catégorie
déterminée. Donc, dans la page d\textquoteright administration de
produits, l\textquoteright administrateur pourra ajouter les produits
avec nombreuses propriétés.


\section{Présentation des résultats}

Dans cette partie, nous vous présenterons l'ensemble des pages réalisé
sous forme de capture d'écran.

\begin{figure}[H]
\includegraphics[scale=0.25]{collé9}

\caption{Screenshot 1: Page de login du site OpenWallet}


\end{figure}
\begin{figure}[H]
\includegraphics[scale=0.25]{collé10}

\caption{Screenshot 2: Page d\textquoteright accueil du site OpenWallet}


\end{figure}
\begin{figure}[H]
\includegraphics[scale=0.25]{collé11}

\caption{Screenshot 3: Page d\textquoteright inscription au site OpenWallet}


\end{figure}
\begin{figure}[H]
\includegraphics[scale=0.25]{collé12}

\caption{Screenshot 4: Page d\textquoteright un produit du site OpenWallet}


\end{figure}
\begin{figure}[H]
\includegraphics[scale=0.25]{collé13}

\caption{Screenshot 5: Page de produit classé par catégorie. Ici c\textquoteright est
la catégorie Homme.}


\end{figure}
\begin{figure}[H]
\includegraphics[scale=0.25]{collé17}\caption{Screenshot 6: Page d\textquoteright accueil du site OpenWallet, après
le login.}


\end{figure}
\begin{figure}[H]
\includegraphics[scale=0.25]{collé18}

\caption{Screenshot 7: Page d\textquoteright accueil du site OpenWallet, avec
affichage des catégories.}
\end{figure}
\begin{figure}[H]
\includegraphics[scale=0.25]{collé19}\caption{Screenshot 8: Page de la saisie de l\textquoteright adresse d\textquoteright expédition.}


\end{figure}
\begin{figure}[H]
\includegraphics[scale=0.25]{collé20}

\caption{Screenshot 9: Page montrant le contenu du chariot.}


\end{figure}
\begin{figure}[H]
\includegraphics[scale=0.25]{collé21}

\caption{Screenshot 10: Page Admin listant les utilisateurs du site OpenWallet.}


\end{figure}
\begin{figure}[H]
\includegraphics[scale=0.25]{collé22}

\caption{Screenshot 11: Page Admin listant tous les produits du site OpenWallet.}


\end{figure}
\begin{figure}[H]
\includegraphics[scale=0.25]{collé23}

\caption{Screenshot 12: Page Admin listant tous les commandes du site OpenWallet}


\end{figure}
\begin{figure}[H]
\includegraphics[scale=0.25]{collé24}

\caption{Screenshot 13: Page Admin listant toutes les catégories du site OpenWallet.}


\end{figure}



\part{Conclusions et perspectives}

Afin de conclure ce projet, nous allons tout d'abord énoncer un bilan
de nos réalisations et ensuite présenter les perspectives qui nous
sont offertes au vus de nos travaux. 

Au cours de ce projet, nous avons pu réaliser le site de ventes en
nous basant sur un modèle de template pour le front-end et l'application
du motif MVC, via l'implémentation de servlets et du pattern DAO (pour
la communication avec une base de données MySQL) pour le back-end.

Les fonctionnalités non-réalisées sont les suivantes : 
\begin{enumerate}
\item Changer le nombre d'un produit et supprimer un produit dans la page
panier. Le code JS étant déja réalisé, il suffirait ensuite de réaliser
la servlet correspondante pour implémenter cette fonctionnalité.
\item Création d'une commande : on peut cliquer sur le bouton Pay dans la
page panier, ça redirige vers la page de shipping address mais on
ne peut pas récuperer les produit à acheter.
\item Premium, la fonctionnalité a été jugée peu importante. Il y aurait
un attribut à ajouter dans la classe correspondante, et créer une
page jsp mais la contrainte de temps est trop importante.
\item La fonctionnalité Commentaire n'est pas entièrement opérationnelle,
on a une place pour afficher les commentaire s'ils existent. On ne
peut pas avoir un commentaire que si on a fini une commande.
\item Pour les utilisateurs, afin de simplifier la tâche, l'administrateur
est considéré comme le seul vendeur, il peut gérer les catégories
et les produits sur les page dans le répertoire /web/admin.\end{enumerate}

\end{document}
